## 深入理解计算机系统

1.如果你的%ebx存的是存储器里的一个数的地址，那么使用leal指令的用法就是加载有效地址到目的操作数，属于用法1。如果你的%ebx存的是一个数字而已，不代表其他的意思，那么这个就是普通的算术运算，这样可以实现一些加减乘法，属于用法2。leal的用法还是比较灵活的

2.在程序中利用局部性：

*   通过按照数据对象存储在存储器中的顺序、以步长为1的来读取数据，从而使你的程序中的空间局部性最大。
*   一旦从存储器中读入了一个数据对象，就尽可能多地使用它，从而使得程序中的时间局部性最大。

3.头文件的目的主要是为了使某些定义可以供多个不同的C源程序使用，这涉及到头文件的定位即搜索路径问题。头文件搜索规则如下：


*   所有头文件的搜寻会从 -I 开始
然后找环境变量 C_INCLUDE_PATH, CPLUS_INCLUDE_PATH, OBJC_INCLUDE_PATH 指定的路径
*   再找默认目录(/usr/include, /usr/local/include, /usr/lib/gcc-lib/i386-linux/2.95.2/include 等等) 

4.尽量少定义全局变量，如果一定要用的话，注意下面几点：

*  使用静态变量
*  定义全局变量的时候初始化
*  注意使用 extern 关键字

5.**Library Interpositioning**

这是一个非常有意思的技术，我们可以通过这个技术让程序运行任意我们想要的代码，比方说我们的程序中使用了 malloc，我们可以通过 library interpositioning 让程序执行我们自定义的 malloc 而不是标准库中的 malloc。

因为这相当于是某种链接技术，所以同样可以在不同的时候发生，如：

*  编译时
*  链接时
*  载入/运行时
*  这个技术可以应用在


安全方面

*  沙盒机制
*  加密
*  调试方面
*  可以找到隐藏比较深的 bug
*  监控和查看性能
*  统计函数调用的次数
*  检测内存泄露
*  生成地址记录


具体的例子可以参考Tutorial: Function Interposition in Linux

